<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="stylesheet" type="text/css" href="styles.css" />
  <title>NEUROINFER - Papaya Viewer</title>
    <script type="text/javascript" src="papaya.js"></script>

</head>
<body>

  <div class="banner">
    NEUROINFER
  </div>
   <div class="main-container">
    <div class="container">
      <h2 style="text-align: center;">Coordinate and Probability Input</h2>
      <form id="myForm">
        <label for="brainRegion">Brain Region:</label>
        <select id="brainRegion" name="brainRegion" onchange="changeRegionMask()"></select>

        <label for="radius">Radius:</label>
        <input type="number" id="radius" name="radius">

        <label for="x">X Coordinate:</label>
        <input type="number" id="x" name="x" required>

        <label for="y">Y Coordinate:</label>
        <input type="number" id="y" name="y" required>

        <label for="z">Z Coordinate:</label>
        <input type="number" id="z" name="z" required>

        <label for="words">List of Words (comma-separated):</label>
        <textarea id="words" name="words" rows="4" oninput="autocompleteWords()" required></textarea>
        <div id="autocomplete-suggestions"></div>
         <script>
            function autocompleteWords() {
                const textarea = document.getElementById('words');
                const input = textarea.value.trim().toLowerCase();
                const autocompleteContainer = document.getElementById('autocomplete-suggestions');

                autocompleteContainer.innerHTML = '';

                if (input.length >= 3) {
                    fetch('../data/vocabulary7.txt')
                        .then(response => response.text())
                        .then(data => {
                            const words = data.split('\n');
                            const matchingWords = words.filter(word => word.toLowerCase().startsWith(input));

                            matchingWords.forEach(match => {
                                const suggestion = document.createElement('div');
                                suggestion.textContent = match;
                                suggestion.addEventListener('click', () => {
                                    textarea.value = input + match.substring(input.length);
                                    autocompleteContainer.innerHTML = '';
                                });
                                autocompleteContainer.appendChild(suggestion);
                            });
                        });
                }
            }
         </script>
        <label for="probabilities">Probabilities (comma-separated):</label>
        <input type="text" id="probabilities" name="probabilities" required>

        <button type="button" onclick="submitForm()">Submit</button>
      </form>
    </div>

    <div id="visualizer">
    </div>

    <div class="graphics-container" id="graphicsContainer">
      <h2>Graphics Container</h2>
    </div>
  </div>
  <!--  <script type="text/javascript" src="main.js"></script> <!-- must be placed here as it will look for div id "visualizer" -->
  <script src="papaya-setup.js"></script>
  <script src="papaya-update.js"></script>
  <script src="papaya-request.js"></script>
  <script src="papaya-display.js"></script>
  <script src="fetch-brain-regions.js"></script>
</body>
</html>

